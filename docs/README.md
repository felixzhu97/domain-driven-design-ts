# TypeScript é¢†åŸŸé©±åŠ¨è®¾è®¡ (DDD) å®Œæ•´å®è·µé¡¹ç›®

è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ TypeScript å®ç°çš„å®Œæ•´é¢†åŸŸé©±åŠ¨è®¾è®¡ (Domain-Driven Design) ç¤ºä¾‹é¡¹ç›®ï¼Œå±•ç¤ºäº†ç°ä»£è½¯ä»¶æ¶æ„æœ€ä½³å®è·µã€‚

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

æœ¬é¡¹ç›®é‡‡ç”¨ç»å…¸çš„å››å±‚ DDD æ¶æ„ï¼š

```
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ domain/              # é¢†åŸŸå±‚ - æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ entities/        # å®ä½“å’Œèšåˆæ ¹
â”‚   â”‚   â”œâ”€â”€ value-objects/   # å€¼å¯¹è±¡
â”‚   â”‚   â”œâ”€â”€ services/        # é¢†åŸŸæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ events/          # é¢†åŸŸäº‹ä»¶
â”‚   â”‚   â””â”€â”€ repositories/    # ä»“å‚¨æ¥å£
â”‚   â”œâ”€â”€ application/         # åº”ç”¨å±‚ - åº”ç”¨æœåŠ¡å’Œä¸šåŠ¡æµç¨‹
â”‚   â”‚   â”œâ”€â”€ commands/        # å‘½ä»¤å¤„ç† (CQRS)
â”‚   â”‚   â”œâ”€â”€ queries/         # æŸ¥è¯¢å¤„ç† (CQRS)
â”‚   â”‚   â””â”€â”€ services/        # åº”ç”¨æœåŠ¡
â”‚   â”œâ”€â”€ infrastructure/      # åŸºç¡€è®¾æ–½å±‚ - æŠ€æœ¯å®ç°
â”‚   â”‚   â”œâ”€â”€ repositories/    # ä»“å‚¨å®ç°
â”‚   â”‚   â”œâ”€â”€ persistence/     # æ•°æ®æŒä¹…åŒ–
â”‚   â”‚   â””â”€â”€ events/          # äº‹ä»¶å¤„ç†åŸºç¡€è®¾æ–½
â”‚   â”œâ”€â”€ presentation/        # è¡¨ç¤ºå±‚ - APIå’Œç”¨æˆ·æ¥å£
â”‚   â”‚   â”œâ”€â”€ controllers/     # REST API æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ dtos/            # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”‚   â””â”€â”€ demo/            # APIæ¼”ç¤º
â”‚   â””â”€â”€ shared/              # å…±äº«ç»„ä»¶
â”‚       â”œâ”€â”€ types/           # ç±»å‹å®šä¹‰
â”‚       â””â”€â”€ utils/           # å·¥å…·å‡½æ•°
```

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ¯ DDD æ ¸å¿ƒæ¦‚å¿µå®ç°

- **èšåˆæ ¹ (Aggregate Root)**: User, Product, Order
- **å®ä½“ (Entity)**: OrderItem
- **å€¼å¯¹è±¡ (Value Object)**: Email, Money, Address, ProductCategory
- **é¢†åŸŸæœåŠ¡ (Domain Service)**: OrderService, UserRegistrationService
- **é¢†åŸŸäº‹ä»¶ (Domain Event)**: UserEvents, ProductEvents, OrderEvents
- **ä»“å‚¨æ¨¡å¼ (Repository Pattern)**: åˆ†ç¦»æ¥å£å®šä¹‰å’Œå®ç°

### ğŸ”„ CQRS å®ç°

- **å‘½ä»¤å¤„ç†**: CreateUserCommand, CreateProductCommand, CreateOrderCommand
- **æŸ¥è¯¢å¤„ç†**: GetUserByIdQuery, GetProductsQuery, GetOrdersQuery
- **å‘½ä»¤æŸ¥è¯¢åˆ†ç¦»**: è¯»å†™æ“ä½œå®Œå…¨åˆ†ç¦»ï¼Œæ”¯æŒä¸åŒçš„ä¼˜åŒ–ç­–ç•¥

### ğŸ›ï¸ åˆ†å±‚æ¶æ„

- **ä¸¥æ ¼çš„ä¾èµ–æ–¹å‘**: å†…å±‚ä¸ä¾èµ–å¤–å±‚ï¼Œé€šè¿‡æ¥å£å®ç°ä¾èµ–åè½¬
- **æ¸…æ™°çš„èŒè´£åˆ†ç¦»**: æ¯å±‚éƒ½æœ‰æ˜ç¡®çš„èŒè´£è¾¹ç•Œ
- **å¯æµ‹è¯•æ€§**: æ¯å±‚éƒ½å¯ä»¥ç‹¬ç«‹æµ‹è¯•

### ğŸ’¾ åŸºç¡€è®¾æ–½å®ç°

- **å†…å­˜ä»“å‚¨**: å®Œæ•´çš„å†…å­˜æ•°æ®å­˜å‚¨å®ç°ï¼Œæ”¯æŒå¤æ‚æŸ¥è¯¢
- **åˆ†é¡µæ”¯æŒ**: å®Œæ•´çš„åˆ†é¡µã€æ’åºã€è¿‡æ»¤åŠŸèƒ½
- **ç±»å‹å®‰å…¨**: ä¸¥æ ¼çš„ TypeScript ç±»å‹æ£€æŸ¥

## ğŸ›’ ä¸šåŠ¡åœºæ™¯

æœ¬é¡¹ç›®ä»¥ç”µå•†ç³»ç»Ÿä¸ºä¾‹ï¼Œå®ç°äº†å®Œæ•´çš„ä¸šåŠ¡æµç¨‹ï¼š

### ğŸ‘¥ ç”¨æˆ·ç®¡ç†

- ç”¨æˆ·æ³¨å†Œå’Œè®¤è¯
- ç”¨æˆ·ä¿¡æ¯ç®¡ç†
- åœ°å€ç®¡ç†
- ç”¨æˆ·çŠ¶æ€ç®¡ç†ï¼ˆæ¿€æ´»/æš‚åœï¼‰

### ğŸ“¦ å•†å“ç®¡ç†

- å•†å“åˆ›å»ºå’Œç®¡ç†
- åˆ†ç±»ç®¡ç†
- åº“å­˜ç®¡ç†
- ä»·æ ¼ç®¡ç†
- å•†å“æœç´¢å’Œè¿‡æ»¤

### ğŸ›ï¸ è®¢å•å¤„ç†

- è®¢å•åˆ›å»º
- è®¢å•çŠ¶æ€ç®¡ç†ï¼ˆå¾…ç¡®è®¤ â†’ å·²ç¡®è®¤ â†’ å·²æ”¯ä»˜ â†’ å·²å‘è´§ â†’ å·²å®Œæˆï¼‰
- è®¢å•å–æ¶ˆ
- åº“å­˜æ‰£å‡

### ğŸ“Š æ•°æ®ç»Ÿè®¡

- ç”¨æˆ·ç»Ÿè®¡
- å•†å“ç»Ÿè®¡
- è®¢å•ç»Ÿè®¡
- é”€å”®æ•°æ®åˆ†æ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
npm install
```

### è¿è¡Œæ¼”ç¤º

```bash
npm start
```

è¿™å°†è¿è¡Œå®Œæ•´çš„ä¸šåŠ¡æµç¨‹æ¼”ç¤ºï¼ŒåŒ…æ‹¬ï¼š

1. ç”¨æˆ·ç®¡ç†åŠŸèƒ½æ¼”ç¤º
2. å•†å“ç®¡ç†åŠŸèƒ½æ¼”ç¤º
3. è®¢å•ä¸šåŠ¡æµç¨‹æ¼”ç¤º
4. ç»Ÿè®¡åˆ†æåŠŸèƒ½æ¼”ç¤º
5. äº‹ä»¶å¤„ç†æœºåˆ¶æ¼”ç¤º
6. REST API æ§åˆ¶å™¨æ¼”ç¤º

### è¿è¡Œæµ‹è¯•

```bash
npm test
```

### ç¼–è¯‘é¡¹ç›®

```bash
npm run build
```

## ğŸ“š ä»£ç ç¤ºä¾‹

### åˆ›å»ºç”¨æˆ·

```typescript
// 1. ä½¿ç”¨å€¼å¯¹è±¡ç¡®ä¿æ•°æ®å®Œæ•´æ€§
const email = Email.create("user@example.com");
const address = Address.create({
  country: "ä¸­å›½",
  province: "åŒ—äº¬å¸‚",
  city: "åŒ—äº¬å¸‚",
  district: "æœé˜³åŒº",
  street: "å»ºå›½è·¯88å·",
  postalCode: "100025",
});

// 2. ä½¿ç”¨å®ä½“åˆ›å»ºç”¨æˆ·
const user = User.create(email, "å¼ ä¸‰", "password123", address);

// 3. é€šè¿‡ä»“å‚¨ä¿å­˜
await userRepository.save(user);
```

### å¤„ç†è®¢å•ä¸šåŠ¡

```typescript
// 1. ä½¿ç”¨å‘½ä»¤æ¨¡å¼
const command = new CreateOrderCommand({
  customerId: "user-123",
  orderItems: [{ productId: "product-456", quantity: 2 }],
});

// 2. å‘½ä»¤å¤„ç†å™¨å¤„ç†ä¸šåŠ¡é€»è¾‘
const result = await createOrderHandler.handle(command);

// 3. ä½¿ç”¨é¢†åŸŸæœåŠ¡å¤„ç†å¤æ‚ä¸šåŠ¡é€»è¾‘
const order = await orderService.createOrder({
  customerId: command.customerId,
  orderItems: validatedItems,
  shippingAddress: customerAddress,
});
```

### REST API ä½¿ç”¨

```typescript
// è·å–å•†å“åˆ—è¡¨
const response = await productController.getProducts({
  page: 1,
  pageSize: 10,
  category: "æ•°ç äº§å“",
  minPrice: 1000,
  maxPrice: 5000,
  sortBy: "price",
  sortOrder: "desc",
});
```

## ğŸ§ª æµ‹è¯•

é¡¹ç›®åŒ…å«å®Œæ•´çš„å•å…ƒæµ‹è¯•ï¼Œè¦†ç›–ï¼š

- **å®ä½“æµ‹è¯•**: User.test.ts
- **å€¼å¯¹è±¡æµ‹è¯•**: Email.test.ts, Money.test.ts
- **é¢†åŸŸæœåŠ¡æµ‹è¯•**: ä¸šåŠ¡é€»è¾‘éªŒè¯
- **ä»“å‚¨æµ‹è¯•**: æ•°æ®è®¿é—®é€»è¾‘æµ‹è¯•

è¿è¡Œæµ‹è¯•ï¼š

```bash
npm test
```

## ğŸ”§ æŠ€æœ¯æ ˆ

- **TypeScript 5.x**: ç±»å‹å®‰å…¨çš„ JavaScript
- **Node.js**: è¿è¡Œæ—¶ç¯å¢ƒ
- **Jest**: æµ‹è¯•æ¡†æ¶
- **ESLint**: ä»£ç è´¨é‡å·¥å…·

## ğŸ“‹ å¾…åŠäº‹é¡¹

- [ ] å®ç°çœŸå®æ•°æ®åº“ä»“å‚¨ï¼ˆPostgreSQL/MongoDBï¼‰
- [ ] æ·»åŠ  Web API æ¡†æ¶é›†æˆï¼ˆExpress/Fastifyï¼‰
- [ ] å®ç°äº‹ä»¶å­˜å‚¨å’Œäº‹ä»¶æº¯æº
- [ ] æ·»åŠ ç¼“å­˜å±‚ï¼ˆRedisï¼‰
- [ ] å®ç°æ¶ˆæ¯é˜Ÿåˆ—é›†æˆ
- [ ] æ·»åŠ  API æ–‡æ¡£ç”Ÿæˆï¼ˆOpenAPI/Swaggerï¼‰
- [ ] å®ç°è®¤è¯å’Œæˆæƒæœºåˆ¶
- [ ] æ·»åŠ æ—¥å¿—è®°å½•å’Œç›‘æ§
- [ ] Docker å®¹å™¨åŒ–éƒ¨ç½²

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

## ğŸ“ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

- Eric Evans - Domain-Driven Design æ¦‚å¿µåˆ›å§‹äºº
- Vaughn Vernon - DDD å®è·µä¸“å®¶
- Martin Fowler - ä¼ä¸šåº”ç”¨æ¶æ„æ¨¡å¼

---

**æ³¨æ„**: è¿™æ˜¯ä¸€ä¸ªæ•™å­¦ç¤ºä¾‹é¡¹ç›®ï¼Œå±•ç¤º DDD æ¦‚å¿µå’Œæœ€ä½³å®è·µã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨æ—¶ï¼Œè¯·æ ¹æ®å…·ä½“éœ€æ±‚è¿›è¡Œé€‚å½“çš„è°ƒæ•´å’Œæ‰©å±•ã€‚
